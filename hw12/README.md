## Мониторинг производительности

#### 1. Установка инструментов для анализа и траблшутинга.

Для установки нужных нам инструментов написаны две роли:

- [deploy_monitoring_tools](roles/deploy_monitoring_tools/)
- [setup_atop_service](roles/setup_atop_service/)

Для того, что бы были последние версии пакетов, добавляются еще дополнительные репозитории, для этого написана роль - [add_repos](roles/add_repos/).

#### 2. Установка параметров ядра под работу в качестве сервера.

Для установки разнообразных опций ядра написана роль - [tune_kernel](roles/tune_kernel/), которая устанавливает службу `sysctl` в `systemd`, и с помощью шаблона генерирует конфигурационный файл `sysctl.conf`.

Так же написана роль для обновления ядра системы - [upgrade_kernel](roles/upgrade_kernel/), которая из репозитория ELRepo скачивает последнюю стабильную версию ядра и обновляет его.


#### 3. Написать playbook для первоначальной настройки хоста после инсталляции по всем прошедшим лекциям

В домашнем задании [11](../hw11) и [12](../hw12) написаны роли, для разворачивания nginx, ipa-сервера и клиента, их можно подключить к [результирующему плейбуку](setup-new-host.yml) этой домашней работы (`setup-new-host.yml`).

#### 4. Роли по все прошедшим урокам.

##### TODO:

- пересборка ядра :-] (в Ansible можно сделать через `command` или `shell`)
- установка `mdraid` и сборка raid с его помощью (можно сделать через `command` или `shell)
- манипуляции с `lvm` (в Ansible есть модуль - `lvg`)
- скрипт для крона, который мониторит лог nginx и отправляет e-mail (в Ansible есть модуль - `cron`)
- `spanw-cgi` и `jira` - установка как сервисов systemd (аналог сделан в ДЗ №11, там роль для nginx)
- работа с модулями `pam` из ДЗ №7 (в Ansible есть модуль - `pamd`)
- сборка пакета (в Ansible можно сделать через `command` или `shell`)
- скрипт - аналог `ps` (забросить готовый скрипт на хост)

 Выходит достаточно много. Со временем можно одолеть :).

#### 4. Ссылки.

- [Хороший текст про то, что же такое LA](https://habr.com/company/mailru/blog/335326/)
- [Служба tuned](http://itmithran.com/tuned-automatic-performance-tuning-of-linux-servers/)
- [Шпаргалака по yum](https://habr.com/post/301292/)